RateFu
======

Introduction goes here.

Install
======

Run the following command:
<pre>
	./script/plugin install git://github.com/joebva/rate_fu.git
</pre>
Create a new rails migration using the generator:
<pre>
	./script/generate rate_fu RateableModel
</pre>
This will create a migration file ('ratings' table) and a directory /app/views/ratings with a partial and a .rjs file. It will also move stars.gif to public/images.

Add this to all the models you want to be rate: (articles, photos, images)
<pre>
	acts_as_rateable
</pre>
Add this to all the models you want to rate things: (users, accounts, employees)
<pre>
	acts_as_rater
</pre>
Add this to the show view of each model you set as 'acts_as_rateable'
<pre>
	<% rating_stars :generate_css => true %>
	<div id="star_ratings_block">
	  <%= render :partial => "ratings/rating", :locals => { :rateable => @rateable } %>
	</div>
</pre>
The rating_stars method inserts inline css. This can be omitted if you move the styles into your css file.

Add this to your controller show action for each rateable model:
<pre>
	def show
    	@article = Article.find(params[:id])
		@rateable = @article
		# TODO for testing find the first user
		@current_user ? @current_user = User.find(params[:user_id]) : @current_user = User.find(:first)		
	end
</pre>

Make sure you include javascript in the head:
<pre>
	<%= javascript_include_tag :defaults %>
</pre>

Create a 'Ratings' controller and paste this code inside of it:
<pre>
  # rate the image by rateable type
  def rate
    rateable_class = params[:type]
    @rateable = rateable_class.constantize.find(params[:id])
    # TODO for testing find the first user
    @current_user ? @current_user = User.find(params[:user_id]) : @current_user = User.find(:first)
    @current_user.rate(@rateable, params[:rating])
  end
</pre>
You must set @current_user equal to whatever 'rater' will be rating this object. if it is a student doing the rating, then set "@current_user = Student.find(params[:student_id])". Remove the line below testing.  This will grab the first User if no user_id param is passed in.

Example
=======

<pre>
	rails rate_test
	cd rate_test
	script/generate scaffold User name:string
	script/generate scaffold Article title:string
	script/plugin install git://github.com/joebva/rate_fu.git
	script/generate rate_fu RateableModel
	rake db:migrate
	-add acts_as_rateable
	-add acts_as_rater
	-update rateable show views
	-add partial to view
	script/generate controller Ratings
	-add rate method to RatingsController
	-add javascript_include_tag :defaults to layout
	script/server
	-add user
	-add article
	-show article
	-rate article
</pre>

	
Copyright (c) 2009 [Joseph Belcher], released under the MIT license

